<!DOCTYPE html>
<html layout:decorator="layout">
<head>
<meta name="google-signin-client_id"
	content="751633686597-v20bqsr84tb87mp074vu6v5vpghmi5hm.apps.googleusercontent.com" />
<title>Home</title>
<link href="../../../resources/static/css/bootstrap.min.css"
	rel="stylesheet" media="screen" th:href="@{/css/bootstrap.min.css}" />
<link href="../../../resources/static/css/core.css" rel="stylesheet"
	media="screen" th:href="@{/css/core.css}" />
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="../../../resources/static/js/bootstrap.min.js"
	th:src="@{/js/bootstrap.min.js}"></script>
<script src="../../../resources/static/js/devices.js"
	th:src="@{/js/devices.js}"></script>
</head>
<body>

	<!--/*  */-->
	<div layout:fragment="content">
		<div class="jumbotron">
			<h1>Welcome to Smart Home!</h1>
			<p>
				<img src="../../../resources/static/images/wait.gif"
					th:src="@{/images/wait.gif}" alt="wait" class="wait-gif hidden" />
				<span class="devices-i">0</span> of <span class="devices-n">0</span>
				devices are online.
			</p>
			<div id="alertDiv" class="alert alert-danger hidden" role="alert"></div>
			<p>
				<a id="devicesBtn" class="btn btn-success btn-lg" href="#"
					th:href="@{/devices}" role="button">View devices</a>
			</p>
			<p>Please login to get full control.</p>
			<p>
				<a class="btn btn-primary btn-lg g-signin2" href="#" role="button"
					data-onsuccess="onSignIn">Login</a>
			</p>
		</div>
		<script th:inline="text" async="async" defer="defer"
			src="https://apis.google.com/js/platform.js">
			
		</script>
		<script>
			jQuery(document).ready(function() {
				DEVICES.homeUpdate();
			});
			function onSignIn(googleUser) {
				var id_token = googleUser.getAuthResponse().id_token;
				jQuery.ajax({
					method : 'POST',
					url : '/auth',
					data : id_token,
					dataType : 'json'
				}).done(function(data) {
					console.log(data);
				});
			}
		</script>
	</div>
</body>
</html>